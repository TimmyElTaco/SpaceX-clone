---
import Layout from '../layouts/Layout.astro';
import { getRockets } from '../services/api';

const { id } = Astro.params;

const rockets = await getRockets();

const rocket = rockets.filter( rocket => rocket.id === id)[0];

export const getStaticPaths = ( async () => {

    const rockets = await getRockets();
    
    return rockets.map( rocket => {
        return { params: {id: rocket.id} }
    } );

});

---

<Layout title=`SpaceX - ${rocket.name}`>
    <section class="w-full h-screen flex flex-col overflow-hidden bg-gradient-to-r from-black from-10% to-transparent to-90%">
        <article class="flex flex-col justify-end items-start w-full lg:w-1/2 h-full px-20 pb-16">
            <h2 class="text-white font-D-DIN-Bold text-6xl pb-4 animate-fade-up">{rocket.name.toUpperCase()}</h2>
            <p class="text-gray-200 font-D-DIN-Regular font-light animate-fade-up animate-delay-200 text-pretty">{rocket.description}</p>
            <div class="w-full flex py-4 flex-col gap-8 text-base items-center animate-fade-up animate-delay-[400ms]">
                <div class="text-white flex flex-row justify-between w-full relative">
                    <p>FIRST FLIGHT</p>
                    <p class="font-light">{rocket.first_flight}</p>
                    <div class="absolute w-full h-[2px] bg-white top-9 opacity-30"></div>
                </div>
                <div class="text-white flex flex-row justify-between w-full relative">
                    <p>ACTIVE</p>
                    <p class="font-light">{rocket.active ? 'ACTIVE' : 'INACTIVE'}</p>
                    <div class="absolute w-full h-[2px] bg-white top-9 opacity-30"></div>
                </div>
                <div class="text-white flex flex-row justify-between w-full relative">
                    <p>HEIGHT</p>
                    <p class="font-light">{rocket.height.meters} meters</p>
                    <div class="absolute w-full h-[2px] bg-white top-9 opacity-30"></div>
                </div>
                <div class="text-white flex flex-row justify-between w-full relative">
                    <p>STAGES</p>
                    <p class="font-light">{rocket.stages}</p>
                    <div class="absolute w-full h-[2px] bg-white top-9 opacity-30"></div>
                </div>
                <div class="text-white flex flex-row justify-between w-full relative">
                    <p>SUCCESS RATE</p>
                    <p class="font-light">{rocket.success_rate_pct}%</p>
                    <div class="absolute w-full h-[2px] bg-white top-9 opacity-30"></div>
                </div>
                <a href={rocket.wikipedia} class="text-sm relative h-[50px] w-40 overflow-hidden border border-white text-white z-[1] transition-all grid   place-content-center hover:text-black 
                    before:absolute before:top-0 before:left-0 before:w-full before:h-full before:bg-white before:origin-top-right before:transition-transform before:duration-[250ms] before:ease-in-out before:scale-y-0 before:-z-[1]
                    hover:before:origin-bottom-right hover:before:transition-transform hover:before:duration-[250ms] hover:before:ease-out hover:before:scale-y-100 animate-delay-300 animated opacity-100" target="_blank" rel="noopener noreferrer">
                    <span class="z-10">MORE INFO</span>
                </a>
            </div>
        </article>
        <img class="object-cover absolute -z-10 h-full w-full home" src=`/public/static/images/rockets/${id}.jpg` />
    </section>
</Layout>
