---
import Layout from '../layouts/Layout.astro';
import MissionsSection from '../components/MissionsSection.astro';
import Logo from '../components/Logo.astro';

---

<Layout title="SpaceX">
	<main class="font-D-DIN-Regular font-bold">
		<nav class="z-10 fixed w-full text-sm h-[100px] text-white flex flex-row items-center justify-around">
            <ul class="flex tracking-tight gap-6 navbar opacity-100 transition-all duration-150">
                <a href="/" class="absolute top-8 left-24 w-52">
                    <Logo />
                </a>
                <li>
                    <a href="#" class="relative 
                        before:absolute before:left-0 before:z-0 before:top-4 before:h-px before:rounded before:w-full before:bg-white before:transition-transform before:duration-200 before:ease-in-out before:scale-x-0 before:origin-right
                        hover:before:scale-x-100 hover:before:origin-left hover:before:transition-transform hover:before:duration-200 hover:before:ease-out
                    ">FALCON 9</a>
                </li>
                
                <li>
                    <a href="#" class="relative 
                        before:absolute before:left-0 before:z-0 before:top-4 before:h-px before:rounded before:w-full before:bg-white before:transition-transform before:duration-300 before:ease-in-out before:scale-x-0 before:origin-right
                        hover:before:scale-x-100 hover:before:origin-left hover:before:transition-transform hover:before:duration-200 hover:before:ease-out
                    ">FALCON HEAVY</a>
                </li>
                <li>
                    <a href="#" class="relative 
                        before:absolute before:left-0 before:z-0 before:top-4 before:h-px before:rounded before:w-full before:bg-white before:transition-transform before:duration-300 before:ease-in-out before:scale-x-0 before:origin-right
                        hover:before:scale-x-100 hover:before:origin-left hover:before:transition-transform hover:before:duration-200 hover:before:ease-out
                    ">DRAGON</a>
                </li>
                <li>
                    <a href="#" class="relative 
                        before:absolute before:left-0 before:z-0 before:top-4 before:h-px before:rounded before:w-full before:bg-white before:transition-transform before:duration-300 before:ease-in-out before:scale-x-0 before:origin-right
                        hover:before:scale-x-100 hover:before:origin-left hover:before:transition-transform hover:before:duration-200 hover:before:ease-out
                    ">STARSHIP</a>
                </li>
            </ul>
            <div class="background-navbar delay-75 h-full bg-black w-full scale-y-0 origin-top-right absolute -z-10 transition-all duration-[400ms] ease-out"></div>
        </nav>
		<MissionsSection subtitle="UPCOMING LAUNCH" title="STARLINK MISSION" btnText="WATCH">
			<img slot="background" class="home object-cover absolute -z-10 h-full" src='/public/images/Launch_Page_Starlink.jpg' />
		</MissionsSection>
		<MissionsSection subtitle="RECENT LAUNCH" title="TELKOMSAT MERAH PUTIH 2 MISSION">
			<img slot="background" class="object-cover absolute -z-10 h-full" src='/public/images/Merah_Putih_2.jpg' />
		</MissionsSection>
		<MissionsSection title="INTUITIVE MACHINES IM-1 MISSION">
			<img slot="background" class="object-cover absolute -z-10 h-full" src='/public/images/IM_1.jpg' />
		</MissionsSection>
		<MissionsSection title="USSF-124 MISSION">
			<img slot="background" class="object-cover absolute -z-10 h-full" src='/public/images/USSF_124.jpg' />
		</MissionsSection>
		<MissionsSection btnText="LEARN MORE" title="STARSHIP'S SECOND FLIGHT TEST">
			<video autoplay muted slot="background" class="object-cover w-full absolute -z-10 h-full" src='public/images/OTF_2_Launch.mp4' />
		</MissionsSection>
	</main>
	<footer class="w-full h-20 bg-black text-white grid place-content-center">
		<span class="text-gray-300 text-sm">PROYECT CLONE OF <a href="https://www.spacex.com/" class="font-bold text-white">SPACEX OFICIAL PAGE</a></span>
	</footer>
</Layout>

<script>
	
	const target = document.querySelector('.home');
	const backgroundNav = document.querySelector('.background-navbar');

	const options = {
		threshold: 0.1,
	}

	let observer = new IntersectionObserver((e) => {
		const isIntersecting = e[0].isIntersecting;

		if(isIntersecting) {
			backgroundNav.classList.replace('scale-y-100', 'scale-y-0');
		} else {
			backgroundNav.classList.replace('scale-y-0', 'scale-y-100');
		}
		let prevScrollPos = window.scrollY;
	
		window.onscroll = () => {
	
			const currentScrollPos = window.scrollY;
			const navbar = document.querySelector('.navbar');
	
			if(prevScrollPos < currentScrollPos) {
				navbar.classList.replace('opacity-100', 'opacity-0');
				backgroundNav.classList.replace('scale-y-100', 'scale-y-0');
			} else {
				navbar.classList.replace('opacity-0', 'opacity-100');
				
				if(!isIntersecting) {
					backgroundNav.classList.replace('scale-y-0', 'scale-y-100');
				}
			}
	
			prevScrollPos = currentScrollPos;
	
		}
	}, options);

	observer.observe(target);

</script>
